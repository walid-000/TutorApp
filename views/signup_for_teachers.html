<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Sign Up - HomeTutor</title>
    <link href="sign_teachers.css" rel="stylesheet">
</head>
<body>
    <header>
        <img src="./assets/images/Design.png" alt="Tutor App Logo" style="max-width: 150px;">
        <h2>Teacher Sign Up</h2>
    </header>

    <div class="auth-container">
        <h2>Create Your Teacher Account</h2>
        <form id="signup-form">
            <input type="text" id="first-name" placeholder="First Name" required>
            <input type="text" id="middle-name" placeholder="Middle Name (Optional)">
            <input type="text" id="last-name" placeholder="Last Name" required>
            <input type="email" id="email" placeholder="Email" required>
            
            <div class="phone-input">
                <select id="country-code" required>
                    <option value="+91">India (+91)</option>
                    <option value="+1">USA (+1)</option>
                    <option value="+44">UK (+44)</option>
                    <option value="+92">Pakistan (+92)</option>
                    <option value="+61">Australia (+61)</option>
                    <option value="+81">Japan (+81)</option>
                    <option value="+49">Germany (+49)</option>
                    <option value="+86">China (+86)</option>
                    <option value="+33">France (+33)</option>
                    <option value="+55">Brazil (+55)</option>
                    <option value="+39">Italy (+39)</option>
                    <option value="+7">Russia (+7)</option>
                    <option value="+82">South Korea (+82)</option>
                    <option value="+34">Spain (+34)</option>
                    <option value="+27">South Africa (+27)</option>
                    <option value="+64">New Zealand (+64)</option>
                    <option value="+47">Norway (+47)</option>
                    <option value="+45">Denmark (+45)</option>
                    <option value="+60">Malaysia (+60)</option>
                    <option value="+65">Singapore (+65)</option>
                    <option value="+20">Egypt (+20)</option>
                    
                    <option value="+52">Mexico (+52)</option>
                    
                    <option value="+62">Indonesia (+62)</option>
                    <option value="+90">Turkey (+90)</option>
                    
                    <option value="+27">South Africa (+27)</option>
                    <option value="+56">Chile (+56)</option>
                    <option value="+48">Poland (+48)</option>
                    <option value="+94">Sri Lanka (+94)</option>
                    <option value="+60">Malaysia (+60)</option>
                    <option value="+63">Philippines (+63)</option>
                    <option value="+98">Iran (+98)</option>
                    
                    <option value="+66">Thailand (+66)</option>
                    <option value="+41">Switzerland (+41)</option>
                    
                    <option value="+32">Belgium (+32)</option>
                    <option value="+31">Netherlands (+31)</option>

                </select>
                <input type="tel" id="mobile-number" placeholder="Mobile Number" required>
            </div>

            <button type="button" onclick="sendOtp()">Send OTP</button>
            <input type="text" id="otp" placeholder="Enter OTP" style="display: none;">
            
            <input type="text" id="education" placeholder="Education" required>
            <input type="file" id="certificates" required>
            <input type="file" id="photo" required>
            <input type="text" id="address" placeholder="Address" required>
            <input type="text" id="subjects" placeholder="Subjects You Teach" required>
            <button type="submit">Sign Up</button>
            <p>Already have an account? <a href="login.html">Login</a></p>
        </form>
    </div>

    <script>
        document.getElementById('signup-form').addEventListener('submit', async function(e) {
            e.preventDefault();

            const formData = new FormData(this);
            formData.append('otp', document.getElementById('otp').value);
            formData.append('countryCode', document.getElementById('country-code').value);
            formData.append('mobileNumber', document.getElementById('mobile-number').value);

            try {
                const response = await fetch('/register-teacher', {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();

                if (response.ok) {
                    window.location.href = "main.html";
                } else {
                    alert('Error registering teacher: ' + result.error);
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Error registering teacher.');
            }
        });

        function sendOtp() {
            const mobileNumber = document.getElementById('mobile-number').value;
            const countryCode = document.getElementById('country-code').value;

            if (!mobileNumber || !countryCode) {
                alert('Please enter your mobile number and select your country code.');
                return;
            }

            fetch('/send-otp', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ mobileNumber, countryCode })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    document.getElementById('otp').style.display = 'block';
                    alert('OTP sent to your mobile number!');
                } else {
                    alert('Failed to send OTP.');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Error sending OTP.');
            });
        }
    </script>
</body>
</html>
